---
title: 快照读
createTime: 2024/10/24 16:40:01
permalink: /article/8hjxsjed/
---
# 快照读
## 定义
1. 事务读取的数据是基于事务启动时保存的一个<font color="#ff0000">一致性快照</font>，即事务开始时数据库中的数据状态
2. ~~事务开启过程中，查询的数据是事务开始时保留的快照数据~~

## 功能
1. 适用于读取一致性的数据，例如：报表和历史记录查询
2. 快照读+MVCC，避免了幻读

## 原理
1. MVCC使用读取视图（[[Read View]]）实现，读取视图保存了已提交事务的最大Id和时间戳，基于Id和时间戳获取当前事务的最新快照

## 使用
1. 一般不加锁的 select 查询都是快照读
	1. 事务中，第一次读取的是最新的数据，并添加作为一个快照。第二次读取的结果是第一次读取时的快照
