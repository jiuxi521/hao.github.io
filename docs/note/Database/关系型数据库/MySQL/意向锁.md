---
title: 意向锁
createTime: 2024/10/24 16:40:01
permalink: /article/z8fpdgt5/
---
# 意向锁
# 定义
1. 数据库的一种辅助性锁机制，用于提高数据访问的并发性能
## 分类

1. 意向共享锁（IS锁）：只有获取了IS锁，才能获取S锁（IS锁可以有多个）
2. 意向排他锁（IX锁）：只有获取了IX锁，才能获取X锁（IX锁可以有多个）
3. 意向插入锁：间隙锁的一种，锁定索引某个区间范围的锁
	1. 如果插入到同一索引间隙中的多个事务没有插入到间隙中的同一位置，则这些事务不需要等待对方。

## 作用

1. 没有意向锁，需要遍历所有整个表判断是否有行锁的存在，以免发生冲突
2. 有意向锁，只需要判断该意向锁与即将添加的表级锁是否兼容即可。因为意向锁的存在代表了，有行级锁的存在或者即将有行级锁的存在。因而无需遍历整个表，即可获取结果

## 锁兼容机制

1. 当一个事务请求的锁模式与当前的锁兼容，InnoDB就将请求的锁授予该事务；反之如果请求不兼容，则该事物就等待锁释放。
2. 意向锁是InnoDB自动加的，不需要用户干预。
![image.png](https://raw.gitmirror.com/jiuxi521/typora/master/202403141719211.png)