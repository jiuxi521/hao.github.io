---
title: 自增锁
createTime: 2024/10/24 16:40:01
permalink: /article/7cuokoz3/
---
# 自增锁
1. 传统模式
	1. 单条依次执行，同时只能执行一条insert
3. 连续模式（8.0之前默认采用）
	1. insert into...可以确定插入数量的insert语句，留下已知数量的空位，其他事务继续执行
	2. 在实际分配 ID 的过程中，InnoDB 会使用较为轻量级的 mutex 锁，来防止 ID 重复分配，ID 一旦分配好了，mutex 锁就会被释放。
	3. INSERT INTO ... SELECT ...：INSERT 语句不能提前确认数据量，则还是会去获取自增锁
4. 交叉模式（8.0之后默认采用）
	1. 所有的 INSERT 语句，包含 INSERT 和 INSERT INTO ... SELECT ，都不会使用 AUTO-INC 自增锁，而是使用较为轻量的 mutex 锁。这样一来，多条 INSERT 语句可以并发的执行