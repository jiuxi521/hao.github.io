---
title: MySQL底层之Server层
createTime: 2024/10/24 16:40:02
permalink: /article/yei6r2eu/
---
Server层，包括连接层和SQL层
### 连接层
- 客户端和服务器端建立连接，客户端发送 SQL 至服务器端；
	- 连接器：负责用户登录数据库，进行用户的身份认证，包括校验账户密码，权限等操作。
### SQL层
主要包括查询缓存、分析器、优化器、执行器等，所有跨存储引擎的功能都在这一层实现，比如存储过程、触发器、视图，函数等，还有一个通用的 binglog 日志模块。
- 查询缓存：用来缓存已经执行过的 SELECT 语句以及该语句的结果集。 执行查询语句的时候，会先查询缓存（MySQL 8.0 版本后移除，因为这个功能不太实用）。
- 解析器（分析器）： 没有命中缓存的话，SQL 语句就会经过分析器，分析器主要是用来分析 SQL 语句是来干嘛的，分析器也会分为几步：
	- 第一步，词法分析，一条 SQL 语句有多个字符串组成，首先要提取关键字，比如 select，提出查询的表，提出字段名，提出查询条件等等。
	- 第二步，语法分析，主要就是判断你输入的 sql 是否正确，是否符合 MySQL 的语法。
- 优化器： 按照 MySQL 认为最优的方案去执行，判断该sql语句是全表搜索还是索引搜索。
- 执行器： 执行语句，首先执行前会校验该用户有没有权限，如果没有权限，就会返回错误信息，如果有权限，就会去调用引擎的接口，返回接口执行的结果。