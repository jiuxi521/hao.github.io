---
title: 当前读
createTime: 2024/10/24 16:40:01
permalink: /article/rmrme2p0/
---
# 当前读
## 定义
1. 事务读取的数据是数据库中当时的最新数据
2. 可能读取到其他事务已修改未提交的数据，因此<font color="#ff0000">需要使用共享锁或排它锁，防止脏读</font>

## 功能
1. 适用于读取实时性要求较高的数据

## 原理
1. 实时读取数据库中最新的已提交的数据，同时加锁确保数据的一致性

## 使用
1. select * from xxx lock in share mode：[[共享锁]]，所有线程允许读，不允许写
2. select * from xxx for update：[[排它锁]]，阻止其他事务对加锁数据行的并发读写操作，确保一致性
3. update、insert、delete：<font color="#ff0000">获取最新的已提交的数据</font>，加[[表锁]]、[[行锁]]等控制并发
	1. 存在[[幻读]]问题，通过[[Next-Key锁]]解决