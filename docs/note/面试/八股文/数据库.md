---
title: 数据库
createTime: 2024/10/24 16:39:59
permalink: /article/m0aj453v/
---
### 索引优化：模糊查询（%）如何优化？
1. 尽量保证前缀匹配（like 'xx%'）
2. 维护反向字符串；借助反向索引
3. 优先使用其他索引缩小查找范围
4. 修改频率较少、访问次数较多的数据，可放到缓存中
5. 使用专业文本型数据库ES

### 深度分页如何优化（limit offset pagesize）
> 背景：数据库进行偏移消耗性能
1. 如果主键自增，可以使用`limit (page-1)*pagesize pagesize`，代码提前计算好偏移量offset
2. 使用子查询优化(先根据条件查找满足条件的Id，再根据Id查询数据)
```sql
select t.* from table t join (select id from table order by id limit offset pagesize) sub on sub.id = t.id
```
3. 尽量避免[[回表]]（保证查询的数据在非聚簇索引中保存，即查询数据作为索引列）