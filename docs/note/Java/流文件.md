---
title: 流文件
createTime: 2024/10/24 16:39:59
permalink: /article/ich0yfqh/
---
> 有道云笔记：进阶笔记7——流文件
# IO流
参考案例：[spring-web#FileStreamTest](https://gitee.com/ma-hao-chinese/spring-web/blob/5d15bd7652896e4fc40623ea855a858e2c22ad67/src/test/java/stream/FileStreamTest.java)

## IO流的分类
- 第一种：按照流的方向分类：以内存为参照物
	- 流入内存。又称读，或输入
	- 流出内存。又称写， 或输出
- 第二种：按照读取数据方式分类：字节和字符
	- 字节流：以字节为单位读取文件【万能读取方式】
	- 字符流：以字符为单位读取文件【只能读取普通txt文本文件。无法读取word文档、图片、视频、音乐】

> - 既然有了字节流,为什么还要有字符流?
> 	- 字符流是由 Java 虚拟机将字节转换得到的，字节流读取过程较耗时并且容易出现乱码（不知道编码类型）
> 	- 所以， I/O 流就⼲脆提供了⼀个直接操作字符的接⼝，⽅便我们平时对字符进⾏流操作。
> 
> - java.io.FileReader与java.io.FileInputStream的区别
> 	- 只是`byte[]`--->`char[]` | `String`】【只能输出普通文本文件】

### 字节流
- java.io.InputStream(字节输入流)
	- 构造方法
	```java
public FileInputStream(String path);
	```
	- API
	```java
// 读取一个字节：返回下一个字节 或 -1（已到文件末尾）
public int read();
// 读取bytes长度的字节数：返回当前读取字节的长度；直到返回-1
public int read(byte[] bytes);
	```
- java.io.OutputStream 字节输出流
	- 构造方法
	```java
// name指文件的路径，文件不存在默认新增，默认不追加写
public FileOutputStream(String name)
// append为true表示追加写入
public FileOutputStream(String name, boolean append)
	```
	- API
	```java
// 将ASCII值为b的数组写入文件
public void write(int b)
// 将字节数组写入文件
public void write(byte b[])
// 刷新方法
public void flush()
	```

### 字符流
> <font color="#ff0000">字符流和字节的区别在于操作的对象不同，字节流是`byte[]`，字符流是`char[]`</font>
- java.io.Reader 字符输入流

- java.io.Writer 字符输出流
### 缓存流
> 缓存流提供了 `readLine()`方法，可读取一行的文件
- java.io.BufferedInputStream
	```java
public BufferedInputStream(InputStream in)
	```
- java.io.BufferedReader
```java
public BufferedReader(Reader in)
```
- java.io.BufferedWriter
- java.io.BufferedOutputStream

### 转换流【字节流转字符流】
- java.io.InputStreamReader
```java
public InputStreamReader(InputStream in, String charsetName)
```
- java.io.OutputStreamWriter

# 文件操作
## 获取类路径下的资源文件
```java
// 获取字符流
URL url = this.getClass().getClassLoader().getResource("streamFile.txt");
// 获取字节流
Files.newInputStream(Paths.get(Objects.requireNonNull(url).toURI()))
```

## Zip压缩文件处理
> [spring-web#ZipFileTest](https://gitee.com/ma-hao-chinese/spring-web/blob/ace76f9ce10c28a60798dbe3fd846d2316758135/src/test/java/zip/ZipFileTest.java)
1. ZipInputStream 和 ZipOutputStream
	1. ZipInputStream无法指定编码，当拷贝zip文件中含中文名称时，会报错java.lang.IllegalArgumentException: MALFORMED
	2. 需逐个处理ZipEntry
2. ZipFile