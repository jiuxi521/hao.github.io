---
title: Java开发报错
createTime: 2024/10/24 16:39:59
permalink: /article/aryfjwqq/
---
| 报错                                                                                                                                                                                                                                                                                                                                         | 代码                                                                                                                                                                                                                                              | 原因分析                                                                                                                                                                                                                          | 解决思路                                                                                                                                                   |     |     |     |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- | --- | --- | --- |
| Can't assign non-array value to an array                                                                                                                                                                                                                                                                                                   | <br>financingRolloverCashFlow.set("oldCode", financingRolloverCashFlow.getCode());<br>String.valueOf(financingRolloverCashFlow.get("oldCode"))<br>                                                                                              | get的时候没有进行类型转换                                                                                                                                                                                                                | <br>String.valueOf((String)financingRolloverCashFlow.get("oldCode"))<br>                                                                               |     |     |     |
| java.lang.IllegalArgumentException: MALFORMED<br>	at java.util.zip.ZipCoder.toString(ZipCoder.java:58)<br>	at java.util.zip.ZipInputStream.readLOC(ZipInputStream.java:300)<br>	at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:122)                                                                                      | InputStream inputStream = Files.newInputStream(Paths.get(baseDir + "1.zip"));<br>ZipInputStream zipInputStream = new ZipInputStream(inputStream);<br>ZipEntry zipEntry;<br>while ((zipEntry = zipInputStream.getNextEntry()) != null) {<br>}    | ZipInputStream不支持压缩文件中包含中文文件名，需要使用ZipFile处理zip文件                                                                                                                                                                              | [spring-web#ZipFileTest](https://gitee.com/ma-hao-chinese/spring-web/blob/ace76f9ce10c28a60798dbe3fd846d2316758135/src/test/java/zip/ZipFileTest.java) |     |     |     |
| application.yml文件中Map类型的表示形式                                                                                                                                                                                                                                                                                                               | ```<br>my-hash-map:<br>    key1: value1<br>    key2: value2<br>    key3: value3<br>```                                                                                                                                                          |                                                                                                                                                                                                                               |                                                                                                                                                        |     |     |     |
| 后端传long类型数据到前端精度丢失                                                                                                                                                                                                                                                                                                                         | 使用@ResponseBody标注的方法<br>1. 添加序列化器`@JsonSerialize(using = ToStringSerializer.class)` <br>2. 添加注解 `@JsonFormat(shape =JsonFormat.Shape.STRING)`（单个生效）<br>3. 修改ObjectMapper的序列化配置，添加序列化器（全局）<br>使用Response#getWriter()#write()方法，需要手动将对象转换为json串返回 | 在 JavaScript 中，数字类型默认会被转换为[双精度浮点数](https://so.csdn.net/so/search?q=%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%B5%AE%E7%82%B9%E6%95%B0&spm=1001.2101.3001.7020)，而双精度浮点数的精度有限，只能精确表示 2 的 53 次方以内（即 Number.MAX_SAFE_INTEGER，约为 9 x 10^15）的整数 | [LongToStringSerializer](https://blog.csdn.net/qq_62357662/article/details/132732310)                                                                  |     |     |     |
| 整数除法：1/2=0；而不是0.5                                                                                                                                                                                                                                                                                                                          | java中浮点数除法应该使用double，可以将数值转为double类型或使用Number.doubleValue()获取浮点数值进行除法运算                                                                                                                                                                         |                                                                                                                                                                                                                               |                                                                                                                                                        |     |     |     |
| 调用String#subString(65535)报错：String index out of range                                                                                                                                                                                                                                                                                      | subString接收的参数不能大于字符串的长度                                                                                                                                                                                                                        |                                                                                                                                                                                                                               |                                                                                                                                                        |     |     |     |
| Annotation-specified bean name 'calcRealRateOfReturnService' for bean class `[com.yonyou.ctp.ctm.finance.engine.universal.instruments.CalcRealRateOfReturnService] `conflicts with existing, non-compatible bean definition of same name and class `[com.yonyou.ctp.ctm.finance.engine.valuation.instruments.CalcRealRateOfReturnService]` | spring定义的bean名称重复                                                                                                                                                                                                                               |                                                                                                                                                                                                                               |                                                                                                                                                        |     |     |     |
|                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                               |                                                                                                                                                        |     |     |     |
|                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                               |                                                                                                                                                        |     |     |     |
